---
layout: post
title: "A-star algorithm 구현하기"
description: A-star algorithm 구현하기
# tags: Algorithm
date: 2020-04-22 20:22:04
comments: true
---

<!-- a star 알고리즘이란 -->
A*(A-star) 알고리즘은 그래프기반의 최단 경로 탐색 알고리즘입니다. 이 글은 그래프 및 그래프 탐색 알고리즘(DFS, BFS..)의 선행학습을 필요로 합니다.  

## Dijkstar Algorithm

A* 알고리즘은 Dijkstra 알고리즘과 유사한 점이 많습니다. 먼저 Dijkstar 알고리즘을 간단히 살펴보겠습니다. 

<!-- dijkstra 그림, 알고리즘 -->
```
function Dijkstra(Graph, source):
    create vertex set Q
    for each vertex v in Graph:             
        dist[v] ← INFINITY                  
        prev[v] ← UNDEFINED                 
        add v to Q                      
    dist[source] ← 0                        
    
    while Q is not empty:
        u ← vertex in Q with min dist[u]             
        remove u from Q 
        for each neighbor v of u:           // only v that are still in Q
            alt ← dist[u] + length(u, v)
            if alt < dist[v]:               
                dist[v] ← alt 
                prev[v] ← u 
    return dist[], prev[]
```

[위키피디아](https://en.wikipedia.org/w/index.php?title=Dijkstra%27s_algorithm&oldid=95033727) Dijkstra's algorithm pseudocode입니다. Breadth-first Search알고리즘과 비슷한 구조를 가지고 있음을 알 수 있습니다. 인접노드를 탐색하고 각 노드까지의 비용을 계산해서 최저 비용으로 갱신하는 방식으로 구현할 수 있습니다. 간단한 구현을 위해 인접 셀과 연결되어 있는 grid구조를 이용하겠습니다.
<!-- dijkstra 구현 -->
<!-- 그래프 visualize? -->
<!-- a star heuristic example -->
```py
from collections import deque
import matplotlib.pyplot as plt
import matplotlib.patches as pts
import random

GRIDSIZE = 100

grid = [[0]*100]*100
check = [[0]*100]*100
dx = [-1,0,0,1]
dy = [0,1,-1,0]
goal = [80,80]

def dijkstra(start):
    Q = deque()
    Q.append(start)
    check[start[0]][start[1]] = 1
    plt.scatter(start[0],start[1],color='r',s=1)
    while not len(Q) == 0:
        # TODO: fix the check and queue
        print('Q :',Q)
        current = Q.popleft()
        for i in range(4):
            next = [current[0]+dx[i],current[1]+dy[i]]
            print(next)
            if next[0] >= 0 and next[1] >= 0:
                if next[0] < GRIDSIZE and next[1] < GRIDSIZE:
                    # if check[next[0]][next[0]] < check[current[0]][current[1]] + 1:
                    if check[next[0]][next[0]] != 0:
                        Q.append(next)
                        check[next[0]][next[1]] = check[current[0]][current[1]] + 1
                        plt.scatter(next[0],next[1],color='r',s=1)
                        plt.pause(0.0001)

def randomObstacle(num,max,min):
    for i in range(num):
        size = random.randrange(min,max)
        startPointX = random.randrange(GRIDSIZE-size)
        startPointY = random.randrange(GRIDSIZE-size)
        for x in range(size):
            for y in range(size):
                grid[startPointX+x][startPointY+y] = 1
        # visualize obstacles
        rect = pts.Rectangle((startPointX,startPointY),size,size,facecolor='k')
        plt.gca().add_patch(rect)


# def visualize_check():
#     for i in range(GRIDSIZE):
#         for j in range(GRIDSIZE):
#             if check[i][j] != 0:


def main():
    #visualize grid
    plt.scatter([-1]*101,range(101),color='k',s=1)
    plt.scatter([101]*101,range(101),color='k',s=1)
    plt.scatter(range(101),[-1]*101,color='k',s=1)
    plt.scatter(range(101),[101]*101,color='k',s=1)
    randomObstacle(10,20,5)
    dijkstra([0,0])
    plt.show()


if __name__ == "__main__":
    main()
```

<!-- a star가 dijkstra와 다른점 -->
<!-- 샘플 구현코드 py -->
<!-- 관련알고리즘 -->
<!-- 알고리즘의 한계점 -->
<!-- 관련 알고리즘 -->
<!-- hybrid a star -->

---

<details>
<summary>참고문서</summary>
<div markdown="1">

- [Wikipedia contributors, "Dijkstra's algorithm," Wikipedia, The Free Encyclopedia,](https://en.wikipedia.org/w/index.php?title=Dijkstra%27s_algorithm&oldid=950337274)
- [Hart et al. "A formal basis for the heuristic determination of minimum cost paths." (1968)](https://ieeexplore.ieee.org/abstract/document/4082128)
- [A.M. Turing Award. - Richards, Hamilton. "Edsger Wybe Dijkstra"](https://amturing.acm.org/award_winners/dijkstra_1053701.cfm)
- [Wikipedia contributors, "A* search algorithm," Wikipedia, The Free Encyclopedia,](https://en.wikipedia.org/w/index.php?title=A*_search_algorithm&oldid=952032788)

</div>
</details>
<script id="dsq-count-scr" src="//msc9533.disqus.com/count.js" async></script>

